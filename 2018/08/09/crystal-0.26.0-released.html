<!DOCTYPE html>
<html lang='ja'>
  <head>
    <title>Crystal 0.26.0 released! - プログラミング言語 Crystal</title>
    <meta charset='UTF-8'>
    <!-- Import Google Icon Font -->
    <link href='https://fonts.googleapis.com/icon?family=Material+Icons|Roboto+Mono' rel='stylesheet'><link type="text/css" rel="stylesheet" href="/assets/stylesheet.css"><link href='/feed.xml' rel='alternate' title='Atom 1.0' type='application/atom+xml'>
    <link href='/favicon.png' rel='icon' type='image/png'>
    <link href='/favicon.ico' rel='shortcut icon' type='image/x-icon'><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Crystal 0.26.0 released! | プログラミング言語 Crystal</title>
<meta name="generator" content="Jekyll v3.8.4" />
<meta property="og:title" content="Crystal 0.26.0 released!" />
<meta name="author" content="bcardiff" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Crystal 0.26.0 has been released!" />
<meta property="og:description" content="Crystal 0.26.0 has been released!" />
<link rel="canonical" href="https://ja.crystal-lang.org/2018/08/09/crystal-0.26.0-released.html" />
<meta property="og:url" content="https://ja.crystal-lang.org/2018/08/09/crystal-0.26.0-released.html" />
<meta property="og:site_name" content="プログラミング言語 Crystal" />
<meta property="og:image" content="https://ja.crystal-lang.org/images/icon.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-08-09T00:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@CrystalLanguage" />
<meta name="twitter:creator" content="@bcardiff" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"https://ja.crystal-lang.org/2018/08/09/crystal-0.26.0-released.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ja.crystal-lang.org/images/crystal-h.png"},"name":"bcardiff"},"url":"https://ja.crystal-lang.org/2018/08/09/crystal-0.26.0-released.html","image":"https://ja.crystal-lang.org/images/icon.png","author":{"@type":"Person","name":"bcardiff"},"description":"Crystal 0.26.0 has been released!","headline":"Crystal 0.26.0 released!","dateModified":"2018-08-09T00:00:00+00:00","datePublished":"2018-08-09T00:00:00+00:00","@type":"BlogPosting","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
 <!-- Let browser know website is optimized for mobile --><meta content='width=device-width, initial-scale=1.0' name='viewport'>
    <script src='https://code.jquery.com/jquery-3.1.1.min.js' type='text/javascript'></script>
  </head>
  <body>
    <div class="wrapper "><nav role='navigation'>
  <div class='nav-wrapper no-select'>
    
      <a class='brand-logo' id='logo-container'>
        <canvas height='120' id='logo-canvas' style='cursor:move' width='120'></canvas>
      </a>
    
    <ul class='right hide-on-med-and-down' id='nav-desktop'>
      
<li>
    <a href="/">
      Home
    </a>
  </li>
<li>
    <a href="https://forum.crystal-lang.org" target="_blank">
      Forum
    </a>
  </li>
<li>
    <a href="/blog/">
      Blog
    </a>
  </li>
<li>
    <a href="/sponsors/">
      Sponsors
    </a>
  </li>
<li>
    <a href="/community/">
      Community
    </a>
  </li>
<li>
    <a href="/docs/">
      Docs
    </a>
  </li>
<li>
    <a href="https://github.com/crystal-lang/crystal" target="_blank">
      GitHub
    </a>
  </li>


    </ul>
    <ul class='side-nav' id='nav-mobile'>
      
<li>
    <a href="/">
      Home
    </a>
  </li>
<li>
    <a href="https://forum.crystal-lang.org" target="_blank">
      Forum
    </a>
  </li>
<li>
    <a href="/blog/">
      Blog
    </a>
  </li>
<li>
    <a href="/sponsors/">
      Sponsors
    </a>
  </li>
<li>
    <a href="/community/">
      Community
    </a>
  </li>
<li>
    <a href="/docs/">
      Docs
    </a>
  </li>
<li>
    <a href="https://github.com/crystal-lang/crystal" target="_blank">
      GitHub
    </a>
  </li>


    </ul>
    <a class='button-collapse' data-activates='nav-mobile' href='#'>
      <i class='material-icons'>menu</i>
    </a>
  </div>
</nav>
   <div class='post-header'>
  <div class="container">
    <div class='valign row'>
      <div class="col m2"></div>
      <div class="col s12 m9">
        <div class="author small">
          
          
            <img src="/assets/authors/bcardiff.jpg" width="360" height="360" alt="authors/bcardiff.jpg">
          
          
            <span class="author_name">Brian J. Cardiff</span>
          
          
          
            <span class="date">09 Aug 2018</span>
          
        </div>

        <h1 class='title'>Crystal 0.26.0 released!</h1>
      </div>
      <div class="col m1"></div>
    </div>
  </div>
</div>
  <main><div class="container">
  <div class="row post-layout">
    <div class="col m2 share">
      <p class="title small share-title">Share</p>
      <div class="share-list">
        
        <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fja.crystal-lang.org%2F2018%2F08%2F09%2Fcrystal-0.26.0-released.html&text=Crystal+0.26.0+released%21&via=CrystalLanguage" target="_blank">
          <div class="share-item"><i class="extra-icons twitter gray"></i></div>
        </a>
        <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fja.crystal-lang.org%2F2018%2F08%2F09%2Fcrystal-0.26.0-released.html" target="_blank">
          <div class="share-item"><i class="extra-icons facebook gray"></i></div>
        </a>
        <a href="https://plus.google.com/share?url=https%3A%2F%2Fja.crystal-lang.org%2F2018%2F08%2F09%2Fcrystal-0.26.0-released.html" target="_blank">
          <div class="share-item"><i class="extra-icons google_plus gray"></i></div>
          </a>
      </div>
    </div>

    <div class="col s12 m9">
      <p><a href="https://github.com/crystal-lang/crystal/releases/tag/0.26.0">Crystal 0.26.0</a> has been released!</p>

<p>This release is focused on polishing APIs, bug fixing the compiler, keep working on windows support and some intermediate language changes for future releases. There were <a href="https://github.com/crystal-lang/crystal/compare/0.25.1...0.26.0">119 commits since 0.25.1</a> by 24 contributors.</p>

<h1 id="language-changes">Language changes</h1>

<h2 id="revert-do-not-collapse-unions-for-sibling-types">Revert: Do not collapse unions for sibling types</h2>

<p>In <a href="/2018/06/15/crystal-0.25.0-released.html#do-not-collapse-unions-for-sibling-types">0.25.0</a> we tried to improve the inferred type of unions of sibling types. Although it worked well for the compiler itself, some codebases out there exhibited some combinatorial explosion of unions due to this change. In 0.26.0, the change introduced in 0.25.0 is reverted. Read more at <a href="https://github.com/crystal-lang/crystal/pull/6351">#6351</a>.</p>

<h2 id="restrict-instance-variables-initializer">Restrict instance variables initializer</h2>

<p>When declaring instance variables it is sometimes handy to define an initial value:</p>

<div class="code_section">
<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Counter</span>
  <span class="vi">@value</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">end</span></code></pre></figure>
</div>

<p>When the expression is a constant or it does not depend on other instance variables the semantic is clear. Before 0.26.0, instance variables were allowed, but there were some corner issues regarding typing, semantics, and dependencies. So, from 0.26.0 instance variables are not allowed in the expression that determines the initial values of them. Class variables are still allowed. Inside <code class="highlighter-rouge">initialize</code> you are still allowed to assign instance variables between each other.</p>

<p>To illustrate why the semantics are not clear, there are rules that could allow the following code to evaluate to: 1, 2 or 3.</p>

<div class="code_section">
<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Foo</span>
  <span class="vi">@bar</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="vi">@baz</span> <span class="o">=</span> <span class="vi">@bar</span> <span class="o">+</span> <span class="mi">1</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="vi">@bar</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
    <span class="vi">@bar</span> <span class="o">=</span> <span class="mi">2</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">baz</span>
    <span class="vi">@baz</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">Foo</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">baz</span> <span class="c1"># =&gt; ???</span></code></pre></figure>
</div>

<p>Read more at <a href="https://github.com/crystal-lang/crystal/pull/6414">#6414</a>.</p>

<h2 id="wrapping-and-integer-division-operators">Wrapping and integer division operators</h2>

<p>There are a new bunch of operators arriving in this version but, since crystal is written in crystal, in this version the only thing that is added are the parsing rules. In future versions semantics will be given, and later breaking changes will be introduced.</p>

<p>All this process is to allow, in a couple of versions, integer overflowing exceptions in arithmetics operations and integer division operators. This will empower safer and cleaner code.</p>

<p>Read more at <a href="https://github.com/crystal-lang/crystal/pull/6329">#6329</a> and <a href="https://github.com/crystal-lang/crystal/pull/6470">#6470</a>.</p>

<h1 id="http-and-networking-related-changes">HTTP and Networking related changes</h1>

<p>There is a performance regression fixed in this release related to <code class="highlighter-rouge">IO</code> by <a href="https://github.com/crystal-lang/crystal/pull/6304">#6304</a>. Now, when buffered <code class="highlighter-rouge">IO</code> is used, the user can control independently if writes and reads are buffered or not.</p>

<p>You will find some great changes in <code class="highlighter-rouge">HTTP::Server</code> API for binding to different address.</p>

<p>A more fine grained method to support ssl is introduced in <a href="https://github.com/crystal-lang/crystal/pull/5960">#5960</a>. SSL can be toggled per binding instead of per server. So <code class="highlighter-rouge">HTTP::Server#tls</code> was dropped in favor of <code class="highlighter-rouge">HTTP::Server#bind_ssl</code>.</p>

<p>Another handy change introduced in <a href="https://github.com/crystal-lang/crystal/pull/6500">#6500</a> is the addition of  <code class="highlighter-rouge">HTTP::Server#bind(URI|String)</code> that infers protocol from scheme of the uri. This means that creating a server that in uses different kind of bindings is a piece of cake.</p>

<div class="code_section">
<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s2">"http/server"</span>

<span class="n">server</span> <span class="o">=</span> <span class="no">HTTP</span><span class="o">::</span><span class="no">Server</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">context</span><span class="o">|</span>
  <span class="o">...</span>
<span class="k">end</span>

<span class="n">server</span><span class="p">.</span><span class="nf">bind</span> <span class="s2">"tcp://127.0.0.1:80"</span>
<span class="n">server</span><span class="p">.</span><span class="nf">bind</span> <span class="s2">"unix:///tmp/server.sock"</span>
<span class="n">server</span><span class="p">.</span><span class="nf">bind</span> <span class="s2">"ssl://127.0.0.1:443?key=private.key&amp;cert=certificate.cert&amp;ca=ca.crt"</span>
<span class="n">server</span><span class="p">.</span><span class="nf">listen</span></code></pre></figure>
</div>

<h1 id="windows-support-progress">Windows support progress</h1>

<p>The compiler and the stdlib is moving forward to support Windows.</p>

<p>Some of the cornerstones of the stdlib were ported:</p>

<ul>
  <li>Accessing environment information was added in <a href="https://github.com/crystal-lang/crystal/pull/6333">#6333</a> and <a href="https://github.com/crystal-lang/crystal/pull/6499">#6499</a>.</li>
  <li><code class="highlighter-rouge">File</code> and <code class="highlighter-rouge">Dir</code> support has landed with <a href="https://github.com/crystal-lang/crystal/pull/5623">#5623</a>.</li>
  <li>And supporting UTF-16 string messages in errors implemented in <a href="https://github.com/crystal-lang/crystal/pull/6442">#6442</a></li>
</ul>

<p>But definitely one of the most exciting additions in this version is the support of Windows structured exception handling (SEH). This was added in <a href="https://github.com/crystal-lang/crystal/pull/6419">#6419</a> and collected work from many contributors and accomplish the extra mile to make things happen. To offer a bit of context information, although LLVM abstracts the target machine and architecture, there is a substantial difference on how to code exception handling in Windows vs. any other platform, if you are willing to dig intro LLVM you can read more about exception handling <a href="https://llvm.org/docs/ExceptionHandling.html#wineh">here</a>.</p>

<h1 id="changelog-format">Changelog format</h1>

<p>This is the second release in which we are trying to improve the format of the changelog. It should be easier to read and depict changes in areas of interest. So, don’t miss the rest of the <a href="https://github.com/crystal-lang/crystal/releases/tag/0.26.0">release changelog</a> information with lots of valuable information.</p>

<h1 id="next-step">Next step</h1>

<p>Please update your Crystal and report any issues. If there are regression or blocking issues with 0.26.0, a 0.26.1 could be released earlier.</p>

<p>The development is possible thanks to the community’s effort, <a href="https://www.84codes.com/">84codes</a>’ support, and every <a href="https://crystal-lang.org/sponsors">BountySource supporter</a>.</p>


    </div>
    <div class="col m1"></div>
  </div>
</div>
</main><footer>
  <div class="row">
    <div class="col s12 m12 l6 crystal">
      Crystal is licensed under the Apache License,
      <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>
        Version 2.0
      </a>
    </div>
    <div class="col s12 m12 l6 manas right-align black-text">
      Crystal language, born & raised at
      <a href="https://manas.tech" target="_blank" class="black-text">Manas</a>
      <a href="https://manas.tech" target="_blank" class="logo">
        <i class="manas"></i>
      </a>
    </div>
  </div>
</footer>
</div><script type="text/javascript" src="/assets/bundle.js"></script> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42353458-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
