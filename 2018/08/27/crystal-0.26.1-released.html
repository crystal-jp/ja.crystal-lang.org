<!DOCTYPE html>
<html lang='ja'>
  <head>
    <title>Crystal 0.26.1 released! - プログラミング言語 Crystal</title>
    <meta charset='UTF-8'>
    <!-- Import Google Icon Font -->
    <link href='https://fonts.googleapis.com/icon?family=Material+Icons|Roboto+Mono' rel='stylesheet'><link type="text/css" rel="stylesheet" href="/assets/stylesheet.css"><link href='/feed.xml' rel='alternate' title='Atom 1.0' type='application/atom+xml'>
    <link href='/favicon.png' rel='icon' type='image/png'>
    <link href='/favicon.ico' rel='shortcut icon' type='image/x-icon'><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Crystal 0.26.1 released! | プログラミング言語 Crystal</title>
<meta name="generator" content="Jekyll v3.8.4" />
<meta property="og:title" content="Crystal 0.26.1 released!" />
<meta name="author" content="bcardiff" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Crystal 0.26.1 has been released!" />
<meta property="og:description" content="Crystal 0.26.1 has been released!" />
<link rel="canonical" href="https://ja.crystal-lang.org/2018/08/27/crystal-0.26.1-released.html" />
<meta property="og:url" content="https://ja.crystal-lang.org/2018/08/27/crystal-0.26.1-released.html" />
<meta property="og:site_name" content="プログラミング言語 Crystal" />
<meta property="og:image" content="https://ja.crystal-lang.org/images/icon.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-08-27T00:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@CrystalLanguage" />
<meta name="twitter:creator" content="@bcardiff" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"https://ja.crystal-lang.org/2018/08/27/crystal-0.26.1-released.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ja.crystal-lang.org/images/crystal-h.png"},"name":"bcardiff"},"url":"https://ja.crystal-lang.org/2018/08/27/crystal-0.26.1-released.html","image":"https://ja.crystal-lang.org/images/icon.png","author":{"@type":"Person","name":"bcardiff"},"description":"Crystal 0.26.1 has been released!","headline":"Crystal 0.26.1 released!","dateModified":"2018-08-27T00:00:00+00:00","datePublished":"2018-08-27T00:00:00+00:00","@type":"BlogPosting","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
 <!-- Let browser know website is optimized for mobile --><meta content='width=device-width, initial-scale=1.0' name='viewport'>
    <script src='https://code.jquery.com/jquery-3.1.1.min.js' type='text/javascript'></script>
  </head>
  <body>
    <div class="wrapper "><nav role='navigation'>
  <div class='nav-wrapper no-select'>
    
      <a class='brand-logo' id='logo-container'>
        <canvas height='120' id='logo-canvas' style='cursor:move' width='120'></canvas>
      </a>
    
    <ul class='right hide-on-med-and-down' id='nav-desktop'>
      
<li>
    <a href="/">
      Home
    </a>
  </li>
<li>
    <a href="https://forum.crystal-lang.org" target="_blank">
      Forum
    </a>
  </li>
<li>
    <a href="/blog/">
      Blog
    </a>
  </li>
<li>
    <a href="/sponsors/">
      Sponsors
    </a>
  </li>
<li>
    <a href="/community/">
      Community
    </a>
  </li>
<li>
    <a href="/docs/">
      Docs
    </a>
  </li>
<li>
    <a href="https://github.com/crystal-lang/crystal" target="_blank">
      GitHub
    </a>
  </li>


    </ul>
    <ul class='side-nav' id='nav-mobile'>
      
<li>
    <a href="/">
      Home
    </a>
  </li>
<li>
    <a href="https://forum.crystal-lang.org" target="_blank">
      Forum
    </a>
  </li>
<li>
    <a href="/blog/">
      Blog
    </a>
  </li>
<li>
    <a href="/sponsors/">
      Sponsors
    </a>
  </li>
<li>
    <a href="/community/">
      Community
    </a>
  </li>
<li>
    <a href="/docs/">
      Docs
    </a>
  </li>
<li>
    <a href="https://github.com/crystal-lang/crystal" target="_blank">
      GitHub
    </a>
  </li>


    </ul>
    <a class='button-collapse' data-activates='nav-mobile' href='#'>
      <i class='material-icons'>menu</i>
    </a>
  </div>
</nav>
   <div class='post-header'>
  <div class="container">
    <div class='valign row'>
      <div class="col m2"></div>
      <div class="col s12 m9">
        <div class="author small">
          
          
            <img src="/assets/authors/bcardiff.jpg" width="360" height="360" alt="authors/bcardiff.jpg">
          
          
            <span class="author_name">Brian J. Cardiff</span>
          
          
          
            <span class="date">27 Aug 2018</span>
          
        </div>

        <h1 class='title'>Crystal 0.26.1 released!</h1>
      </div>
      <div class="col m1"></div>
    </div>
  </div>
</div>
  <main><div class="container">
  <div class="row post-layout">
    <div class="col m2 share">
      <p class="title small share-title">Share</p>
      <div class="share-list">
        
        <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fja.crystal-lang.org%2F2018%2F08%2F27%2Fcrystal-0.26.1-released.html&text=Crystal+0.26.1+released%21&via=CrystalLanguage" target="_blank">
          <div class="share-item"><i class="extra-icons twitter gray"></i></div>
        </a>
        <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fja.crystal-lang.org%2F2018%2F08%2F27%2Fcrystal-0.26.1-released.html" target="_blank">
          <div class="share-item"><i class="extra-icons facebook gray"></i></div>
        </a>
        <a href="https://plus.google.com/share?url=https%3A%2F%2Fja.crystal-lang.org%2F2018%2F08%2F27%2Fcrystal-0.26.1-released.html" target="_blank">
          <div class="share-item"><i class="extra-icons google_plus gray"></i></div>
          </a>
      </div>
    </div>

    <div class="col s12 m9">
      <p><a href="https://github.com/crystal-lang/crystal/releases/tag/0.26.1">Crystal 0.26.1</a> has been released!</p>

<p>This release is mainly focused on regression bugs discovered on 0.26.0. There were <a href="https://github.com/crystal-lang/crystal/compare/0.26.0...0.26.1">39 commits since 0.26.0</a> by 15 contributors.</p>

<p>Although we try to test as much as possible before each release. During 0.26.0 it was more difficult than usual because of some limitation to override nested dependencies. Luckily for this release dependencies are already updated and at the same time there was bit of work in <code class="highlighter-rouge">test-ecosystem</code> to improve what is covered.</p>

<p>Let’s review some of the most relevant changes in this release. But don’t miss the rest of the <a href="https://github.com/crystal-lang/crystal/releases/tag/0.26.1">release changelog</a> with lots of valuable information.</p>

<h1 id="language-changes">Language changes</h1>

<h2 id="make-self-to-be-eager-evaluated-when-including-modules">Make <code class="highlighter-rouge">self</code> to be eager evaluated when including modules.</h2>

<p>When referencing the current type as <code class="highlighter-rouge">self</code>, for example when including a module, <code class="highlighter-rouge">self</code> will now means the current lexical type. Before, and sine 0.22, the <code class="highlighter-rouge">self</code> was resolved to the lowest type in the hierarchy.</p>

<p>Thanks to some other fixes included in 0.26.0, and the amount of metaprogramming in <a href="https://github.com/luckyframework/lucky_record">lucky_record</a> we noticed that the change introduced in 0.22 broke the <a href="https://en.wikipedia.org/wiki/Liskov_substitution_principle">substitution principle</a>. Luckily now it is fixed!</p>

<p>To understand this change let’s suppose we have a the following type hierarchy: <code class="highlighter-rouge">Human &lt; Mammal</code>, <code class="highlighter-rouge">Cat &lt; Mammal</code>. And we have a <code class="highlighter-rouge">TalkTo</code> module defined as follows:</p>

<div class="code_section">
<figure class="highlight"><pre><code class="language-crystal" data-lang="crystal"><span class="k">module</span> <span class="nn">TalkTo</span><span class="p">(</span><span class="no">T</span><span class="p">)</span>
  <span class="k">def</span> <span class="nf">talk_to</span><span class="p">(</span><span class="n">t</span> <span class="p">:</span> <span class="no">T</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="nb">self</span><span class="si">}</span><span class="s2"> is talking to </span><span class="si">#{</span><span class="n">t</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure>
</div>

<p>If we want to make all mammals be able to talk to each other then the following snippet will do:</p>

<div class="code_section">
<figure class="highlight"><pre><code class="language-crystal" data-lang="crystal"><span class="k">abstract</span> <span class="k">class</span> <span class="nc">Mammal</span>
  <span class="kp">include</span> <span class="no">TalkTo</span><span class="p">(</span><span class="nb">self</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Human</span> <span class="o">&lt;</span> <span class="no">Mammal</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Cat</span> <span class="o">&lt;</span> <span class="no">Mammal</span>
<span class="k">end</span>

<span class="n">sabrina</span> <span class="o">=</span> <span class="no">Human</span><span class="p">.</span><span class="nf">new</span>
<span class="n">salem</span> <span class="o">=</span> <span class="no">Cat</span><span class="p">.</span><span class="nf">new</span>
<span class="n">hilda</span> <span class="o">=</span> <span class="no">Human</span><span class="p">.</span><span class="nf">new</span></code></pre></figure>
</div>

<p>Any instance instance of mammal will have a <code class="highlighter-rouge">#talk_to(t : Mammal)</code> method. Hence <code class="highlighter-rouge">sabrina.talk_to(salem)</code> would compile.</p>

<p>But if we need a less magical world we would need to <code class="highlighter-rouge">include TalkTo(self)</code> in each of the classes that inherit Mammal. In order to add some programmer’s happiness, if we want to state that each concrete class should have a method <code class="highlighter-rouge">talk_to</code> accepting only instance of the same class, then we need some metaprogramming.</p>

<div class="code_section">
<figure class="highlight"><pre><code class="language-crystal" data-lang="crystal"><span class="k">abstract</span> <span class="k">class</span> <span class="nc">Mammal</span>
  <span class="n">macro</span> <span class="n">inherited</span>
    <span class="kp">include</span> <span class="no">TalkTo</span><span class="p">({{</span><span class="vi">@type</span><span class="p">}})</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure>
</div>

<p>With the last snippet <code class="highlighter-rouge">sabrina.talk_to(salem)</code> would not compile. But <code class="highlighter-rouge">sabrina.talk_to(hilda)</code> would.</p>

<p>Before this release the <code class="highlighter-rouge">include TalkTo(self)</code> was the same as <code class="highlighter-rouge">macro inherited; include TalkTo({{@type}}); end</code>. Read more at <a href="https://github.com/crystal-lang/crystal/pull/6557">#6557</a>.</p>

<h2 id="add-accepts_block-macro-method-to-def">Add <code class="highlighter-rouge">accepts_block?</code> macro method to Def.</h2>

<p>In macros you can iterate the methods defined in a type with <code class="highlighter-rouge">@type.methods</code>. Sometimes you might need to know if the method can be called with a block in order to get the job done. From this release, inside macros, you can use <code class="highlighter-rouge">#accepts_block?</code> to know that information. Read more at <a href="https://github.com/crystal-lang/crystal/pull/6604">#6604</a></p>

<h1 id="http-and-networking-related-changes">HTTP and Networking related changes</h1>

<p>With the recent changes in the <code class="highlighter-rouge">HTTP::Server</code> there was a security issue introduced that allows servers with self-signed certificates to crash if the client send wrong certificate information. Now the code is more resilient to issues related to establish the connection between peers. Read more at <a href="https://github.com/crystal-lang/crystal/pull/6590">#6590</a>.</p>

<p>In <code class="highlighter-rouge">0.26.0</code> a method <code class="highlighter-rouge">#bind_ssl</code> and calls <code class="highlighter-rouge">#bind</code> with a <code class="highlighter-rouge">ssl://</code> scheme were added. This should have been <code class="highlighter-rouge">#bind_tls</code> and <code class="highlighter-rouge">tls://</code>. So in this release the <code class="highlighter-rouge">ssl</code> are marked as deprecated and <code class="highlighter-rouge">tls</code> were added. Web frameworks should not need updates regarding this changes until 0.27. Read more at <a href="https://github.com/crystal-lang/crystal/pull/6533">#6533</a> and <a href="https://github.com/crystal-lang/crystal/pull/6551">#6551</a>.</p>

<h1 id="windows-support-progress">Windows support progress</h1>

<p>The spec framework of the std lib can now be used in Windows. Read more at <a href="https://github.com/crystal-lang/crystal/pull/6497">#6497</a>. In case you want to read even more about the ongoing efforts related to Windows, please read <a href="https://github.com/crystal-lang/crystal/wiki/Porting-to-Windows">the wiki</a>.</p>

<h1 id="other-changes">Other changes</h1>

<p>There was some improvements regarding how <code class="highlighter-rouge">STDIN</code>/<code class="highlighter-rouge">STDOUT</code>/<code class="highlighter-rouge">STDERR</code> are handled. The introduced changes should avoid breaking other programs that uses them at the same time. For example, when using pipe operator in bash. Read more at <a href="https://github.com/crystal-lang/crystal/pull/6518">#6518</a>.</p>

<p>Applying transformations in keys and values of a hash became even easier with <code class="highlighter-rouge">Hash#transform_keys</code> and <code class="highlighter-rouge">Hash#transform_values</code>. Read more at <a href="https://github.com/crystal-lang/crystal/pull/4385">#4385</a>.</p>

<h1 id="next-step">Next step</h1>

<p>Please update your Crystal and report any issues. If there are regression or blocking issues with 0.26.1, a 0.26.2 could be released earlier. But most likely we will be moving forward with 0.27.0 as next release.</p>

<p>The development is possible thanks to the community’s effort, <a href="https://www.84codes.com/">84codes</a>’ support, and every <a href="https://crystal-lang.org/sponsors">BountySource supporter</a>.</p>

    </div>
    <div class="col m1"></div>
  </div>
</div>
</main><footer>
  <div class="row">
    <div class="col s12 m12 l6 crystal">
      Crystal is licensed under the Apache License,
      <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>
        Version 2.0
      </a>
    </div>
    <div class="col s12 m12 l6 manas right-align black-text">
      Crystal language, born & raised at
      <a href="https://manas.tech" target="_blank" class="black-text">Manas</a>
      <a href="https://manas.tech" target="_blank" class="logo">
        <i class="manas"></i>
      </a>
    </div>
  </div>
</footer>
</div><script type="text/javascript" src="/assets/bundle.js"></script> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42353458-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
